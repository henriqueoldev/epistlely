---
import authorData from "../config/author.json";
import books from "../config/books.json";
---

<section id="menubg" class="menubg">
  <div id="menu">
    <div class="menuAuthor">
      <div class="closeBtnDiv">
        <button id="closeBtn"><i class="bi bi-x-square-fill"></i></button>
      </div>
      <a href="/Author">
        <div class="authorInfo">
          <div>
            <img src={authorData.profilepic} alt="Author Picture" />
            <h3>{authorData.name}</h3>
          </div>
          <i class="bi bi-info-square-fill"></i>
        </div>
      </a>
    </div>
    <div class="menuBookList">
      {
        books.map((book) => {
          return (
            <div
              class="menuBook"
              onclick={"window.location.href = '/Book?id=" + book.path + "'"}
            >
              <p>{book.title}</p>
              <i class="bi bi-bookmark-fill" />
            </div>
          );
        })
      }
    </div>
  </div>
</section>

<script>
  const btnCloseMenu = document.getElementById("closeBtn");
  btnCloseMenu?.addEventListener("click", () => {
    document.getElementById("menubg")?.classList.remove("showf");
    document.getElementById("menu")?.classList.remove("slide-right");
  });
</script>

<style>
  .menubg {
    width: 100vw;
    height: 100vh;
    position: fixed;
    display: flex;
    align-items: center;
    justify-content: right !important;
    background-color: rgba(0, 0, 0, 0.2);
    backdrop-filter: blur(1px);
    z-index: 2;
    display: none;
  }
  #menu {
    width: 32%;
    height: 100vh;
    background-color: var(--primary-color);
    overflow: hidden;
  }

  .authorInfo {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .authorInfo div {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
  }

  #menu button {
    width: 32px;
    height: 32px;
    font-size: 1.2rem;
    background-color: rgba(0, 0, 0, 0);
    border: none;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    padding: 1rem;
  }

  .closeBtnDiv {
    margin: -1rem -1rem 0 -1rem;
  }

  .menuAuthor {
    padding: 1rem;
    background-color: var(--secondary-color);
    transition: all linear 0.1s;
  }

  .menuAuthor:hover {
    box-shadow: 3px 0px 3px 1px rgba(0, 0, 0, 0.5);
    cursor: pointer;
  }

  .menuAuthor img {
    width: 82px;
    height: 82px;
    object-fit: cover;
    border-radius: 0.3rem;
  }

  .menuBookList{
    display: flex;
    flex-direction: column;
    gap: .5rem;
    padding: 1rem;
  }

  .menuBook {
    border-radius: .5rem;
    padding: 1rem;
    background-color: var(--secondary-color);
    display: flex;
    align-items: center;
    justify-content: space-between;
    transition: all ease-out .2s;
  }

  .menuBook:hover{
    translate: .5rem 0;
    cursor: pointer;
  }
</style>
